<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MindMesh - Group Discussion</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 min-h-screen">

  <!-- Main Content Container -->
  <div class="flex items-center justify-center min-h-screen py-8">
    <!-- Group List Section -->
    <div id="group-section" class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-3xl">
      <h1 class="text-3xl font-bold text-center text-purple-700 mb-6">Available Groups</h1>
      <div id="group-list" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
    </div>

    <!-- Chat Section -->
    <div id="chat-section" class="hidden bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col h-[80vh]">
      <!-- Header -->
      <div class="bg-gradient-to-r from-indigo-500 to-purple-500 text-white p-4 flex items-center justify-between rounded-t-2xl">
      <h1 id="group-name" class="text-xl font-bold"></h1>
      <button onclick="exitChat()" class="text-sm bg-white text-purple-600 px-3 py-1 rounded">Exit</button>
    </div>

    <!-- Messages -->
    <div id="chat-box" class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-100"></div>

    <!-- Input -->
    <div class="p-3 bg-white border-t flex items-center space-x-2 rounded-b-2xl">
      <input id="msg-input" type="text" placeholder="Type a message..." class="flex-1 border rounded-full px-4 py-2 focus:outline-none">
      <input type="file" id="image-input" accept="image/*" hidden>
      <button onclick="document.getElementById('image-input').click()" class="bg-pink-500 text-white px-3 py-2 rounded-full">ðŸ“·</button>
      <button onclick="startRecording()" id="voice-btn" class="bg-purple-600 text-white px-3 py-2 rounded-full">ðŸŽ¤</button>
      <button onclick="sendMessage()" class="bg-indigo-600 text-white px-4 py-2 rounded-full">Send</button>
    </div>
  </div>

  <script>
  const groups = [
    { name: "Stress Relief Circle", desc: "Share coping tips & relaxation techniques ðŸ’†" },
    { name: "Anxiety Support", desc: "Talk with peers about handling anxiety ðŸ¤" },
    { name: "Mindful Living", desc: "Practice mindfulness & meditation together ðŸ§˜" },
    { name: "Positive Vibes Only", desc: "Daily dose of positivity & affirmations âœ¨" },
    { name: "Sleep Better Hub", desc: "Discuss healthy sleep routines ðŸ˜´" },
    { name: "Depression Talk", desc: "Safe space for open discussions ðŸ’œ" }
  ];

 const dummyMessages = [
    { name: "Aarav", text: "Iâ€™ve been feeling anxious before exams, how do you guys handle it?", type: "text" },
    { name: "Priya", text: "Meditation really helps me stay calm. Try 5 mins breathing daily ðŸ§˜", type: "text" },
    { name: "Rohan", text: "Sharing this motivational poster ðŸ’¡", type: "image", src: "https://via.placeholder.com/200x150.png?text=Stay+Strong" },
    { name: "Sneha", text: "I usually take small nature walks, they really refresh my mind ðŸŒ¿", type: "text" },
    { name: "Karan", text: "Hereâ€™s a voice note about my relaxation routine:", type: "audio", src: "" } // voice will be recorded dynamically
  ];

    const groupList = document.getElementById("group-list");
    const chatSection = document.getElementById("chat-section");
    const groupSection = document.getElementById("group-section");
    const groupNameEl = document.getElementById("group-name");
    const chatBox = document.getElementById("chat-box");

    groups.forEach((g, index) => {
      const card = document.createElement("div");
      card.className = "bg-gradient-to-r from-pink-300 via-purple-300 to-indigo-300 p-5 rounded-xl shadow-md hover:scale-105 transform transition duration-300";
      card.innerHTML = `
        <h2 class="text-xl font-bold mb-2">${g.name}</h2>
        <p class="text-gray-700 mb-4">${g.desc}</p>
        <button onclick="openChat('${g.name}')" class="bg-purple-700 text-white px-4 py-2 rounded-lg shadow hover:bg-purple-800">Join Group</button>
      `;
      groupList.appendChild(card);
    });

    function openChat(groupName) {
      groupSection.classList.add("hidden");
      chatSection.classList.remove("hidden");
      groupNameEl.textContent = groupName;
      chatBox.innerHTML = ""; // clear old chat
      loadDummyMessages();
    }

    function exitChat() {
      chatSection.classList.add("hidden");
      groupSection.classList.remove("hidden");
    }

    function loadDummyMessages() {
  dummyMessages.forEach(msg => {
    addMessage(msg.name, msg.text, msg.type, msg.src);
  });
}

    function addMessage(name, text, type="text", src=null) {
      const msgDiv = document.createElement("div");
      msgDiv.className = "flex flex-col";
      msgDiv.innerHTML = `
        <span class="text-sm font-bold text-purple-600">${name}</span>
        ${type === "text" ? `<p class="bg-white p-3 rounded-lg shadow">${text}</p>` : ""}
        ${type === "image" ? `<img src="${src}" class="w-40 rounded-lg shadow">` : ""}
        ${type === "audio" ? `<audio controls class="w-48"><source src="${src}" type="audio/webm"></audio>` : ""}
      `;
      chatBox.appendChild(msgDiv);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // Sending text
    function sendMessage() {
      const input = document.getElementById("msg-input");
      if (input.value.trim() !== "") {
        addMessage("You", input.value);
        input.value = "";
      }
    }

    // Sending image
    document.getElementById("image-input").addEventListener("change", e => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => addMessage("You", "", "image", reader.result);
        reader.readAsDataURL(file);
      }
    });

    // Voice recording
    let mediaRecorder, audioChunks = [];
    async function startRecording() {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      mediaRecorder = new MediaRecorder(stream);
      mediaRecorder.start();

      mediaRecorder.ondataavailable = e => audioChunks.push(e.data);
      mediaRecorder.onstop = () => {
        const blob = new Blob(audioChunks, { type: 'audio/webm' });
        const url = URL.createObjectURL(blob);
        addMessage("You", "", "audio", url);
        audioChunks = [];
      };

      setTimeout(() => mediaRecorder.stop(), 3000); // auto stop after 3s
    }
  </script>

  </div> <!-- Close main content container -->

  <!-- Enhanced Footer with Inline CSS -->
  <footer style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); padding: 80px 20px 40px; margin-top: 0; position: relative; color: white;">
    <div style="max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; position: relative; z-index: 2;">
      <div style="display: flex; flex-direction: column; gap: 20px;">
        <h3 style="font-size: 1.3rem; font-weight: 600; color: #f8fafc; margin-bottom: 15px;">MindMesh</h3>
        <p style="color: #94a3b8; line-height: 1.6;">Your mental wellness journey starts here. Connect, share, and grow with our supportive community.</p>
        <div style="display: flex; gap: 15px; margin-top: 10px;">
          <a href="#" style="display: flex; align-items: center; justify-content: center; width: 45px; height: 45px; background: rgba(248, 250, 252, 0.1); border-radius: 50%; color: #e2e8f0; text-decoration: none; transition: all 0.3s ease; border: 2px solid transparent;"><i class="fab fa-facebook"></i></a>
          <a href="#" style="display: flex; align-items: center; justify-content: center; width: 45px; height: 45px; background: rgba(248, 250, 252, 0.1); border-radius: 50%; color: #e2e8f0; text-decoration: none; transition: all 0.3s ease; border: 2px solid transparent;"><i class="fab fa-twitter"></i></a>
          <a href="#" style="display: flex; align-items: center; justify-content: center; width: 45px; height: 45px; background: rgba(248, 250, 252, 0.1); border-radius: 50%; color: #e2e8f0; text-decoration: none; transition: all 0.3s ease; border: 2px solid transparent;"><i class="fab fa-instagram"></i></a>
          <a href="#" style="display: flex; align-items: center; justify-content: center; width: 45px; height: 45px; background: rgba(248, 250, 252, 0.1); border-radius: 50%; color: #e2e8f0; text-decoration: none; transition: all 0.3s ease; border: 2px solid transparent;"><i class="fab fa-linkedin"></i></a>
        </div>
      </div>
      
      <div style="display: flex; flex-direction: column; gap: 20px;">
        <h3 style="font-size: 1.3rem; font-weight: 600; color: #f8fafc; margin-bottom: 15px;">Community</h3>
        <div style="display: flex; flex-direction: column; gap: 12px;">
          <a href="peer.html" style="color: #e2e8f0; text-decoration: none; font-weight: 400; padding: 8px 0; transition: all 0.3s ease;">Peer Support</a>
          <a href="#" style="color: #e2e8f0; text-decoration: none; font-weight: 400; padding: 8px 0; transition: all 0.3s ease;"><i class="fas fa-users"></i> Join Groups</a>
          <a href="#" style="color: #e2e8f0; text-decoration: none; font-weight: 400; padding: 8px 0; transition: all 0.3s ease;"><i class="fas fa-calendar"></i> Events</a>
          <a href="#" style="color: #e2e8f0; text-decoration: none; font-weight: 400; padding: 8px 0; transition: all 0.3s ease;"><i class="fas fa-book"></i> Resources</a>
        </div>
      </div>
      
      <div style="display: flex; flex-direction: column; gap: 20px;">
        <h3 style="font-size: 1.3rem; font-weight: 600; color: #f8fafc; margin-bottom: 15px;">Support</h3>
        <div style="display: flex; flex-direction: column; gap: 12px;">
          <a href="counsel.html" style="color: #e2e8f0; text-decoration: none; font-weight: 400; padding: 8px 0; transition: all 0.3s ease;"><i class="fas fa-user-md"></i> Professional Help</a>
          <a href="#" style="color: #e2e8f0; text-decoration: none; font-weight: 400; padding: 8px 0; transition: all 0.3s ease;"><i class="fas fa-phone"></i> Crisis Hotline</a>
          <a href="#" style="color: #e2e8f0; text-decoration: none; font-weight: 400; padding: 8px 0; transition: all 0.3s ease;"><i class="fas fa-question-circle"></i> FAQ</a>
          <a href="#" style="color: #e2e8f0; text-decoration: none; font-weight: 400; padding: 8px 0; transition: all 0.3s ease;"><i class="fas fa-envelope"></i> Contact Us</a>
        </div>
      </div>
      
      <div style="display: flex; flex-direction: column; gap: 20px;">
        <h3 style="font-size: 1.3rem; font-weight: 600; color: #f8fafc; margin-bottom: 15px;">Resources</h3>
        <div style="display: flex; flex-direction: column; gap: 12px;">
          <a href="ebooks.html" style="color: #e2e8f0; text-decoration: none; font-weight: 400; padding: 8px 0; transition: all 0.3s ease;"><i class="fas fa-book-open"></i> E-books</a>
          <a href="videos.html" style="color: #e2e8f0; text-decoration: none; font-weight: 400; padding: 8px 0; transition: all 0.3s ease;"><i class="fas fa-video"></i> Videos</a>
          <a href="#" style="color: #e2e8f0; text-decoration: none; font-weight: 400; padding: 8px 0; transition: all 0.3s ease;"><i class="fas fa-podcast"></i> Podcasts</a>
          <a href="#" style="color: #e2e8f0; text-decoration: none; font-weight: 400; padding: 8px 0; transition: all 0.3s ease;"><i class="fas fa-blog"></i> Articles</a>
        </div>
      </div>
    </div>
    
    <div style="text-align: center; margin-top: 40px; padding-top: 30px; border-top: 1px solid rgba(248, 250, 252, 0.2); position: relative; z-index: 2;">
      <p style="color: #94a3b8; font-size: 0.9rem; margin: 0;">Â© 2025 MindMesh | Team Innovatrix | Built with ðŸ’™ for mental wellness</p>
    </div>
  </footer>

</body>
</html>
